#
# This file is part of AtomVM.
#
# Copyright 2022 Davide Bettio <davide@uninstall.it>
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#    http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
# SPDX-License-Identifier: Apache-2.0 OR LGPL-2.1-or-later
#

menu "AtomVM Built-In Components"

config AVM_ENABLE_GPIO_NIFS
    bool "Enable GPIO NIFs"
    default y

config AVM_ENABLE_LEDC_NIFS
    bool "Enable LEDC NIFs"
    default y

config AVM_ENABLE_NVS_NIFS
    bool "Enable NVS NIFs"
    default y

config AVM_ENABLE_RTC_SLOW_NIFS
    bool "Enable RTC SLOW NIFs"
    default y

config AVM_RTC_SLOW_MAX_SIZE
    int "RTC SLOW maximum binary size"
    # By default, use the maximum size for esp-idf < 4.4
    # In newer version, available size is 8170
    default 4086

config AVM_ENABLE_GPIO_PORT_DRIVER
    bool "Enable GPIO port driver"
    default y

config AVM_ENABLE_I2C_PORT_DRIVER
    bool "Enable I2C port driver"
    default y

config AVM_ENABLE_NETWORK_PORT_DRIVER
    bool "Enable network port driver"
    default y

config AVM_ENABLE_SOCKET_PORT_DRIVER
    bool "Enable socket port driver"
    default y

config AVM_ENABLE_SPI_PORT_DRIVER
    bool "Enable SPI port driver"
    default y

config AVM_ENABLE_UART_PORT_DRIVER
    bool "Enable UART port driver"
    default y

config AVM_ENABLE_OTP_SOCKET_PORT_DRIVER
    bool "Enable OTP Socket port driver"
    default y

    menu "OTP Socket Driver Config (advanced)"

        config SELECT_QUEUE_SIZE
            int  "Select Queue size (entries)"
            default 32
            help
                Use this parameter to set the size of the select queue used to communicate between RTOS tasks.

        config SELECT_TASK_STACK_SIZE
            int  "Stack size of select queue"
            default 5000
            help
                Use this parameter to set the size of the select task stack.

        config SELECT_TASK_MIN_SLEEP_MS
            int  "Sleep time (in ms) between select calls when socket is active"
            default 50
            help
               Use this parameter to set the amount of time for the select RTOS task to sleep between select calls when at least one socket is active.  Units are in milliseconds.

        config SELECT_TASK_MAX_SLEEP_MS
            int  "Sleep time (in ms) between select calls when no sockets are in use"
            default 1000
            help
               Use this parameter to set the amount of time for the select RTOS task to sleep between select calls when no sockets are active.  Units are in milliseconds.

        config SELECT_TASK_DECAY_MS
            int  "Time (in ms) for linear decay sleep times from min to max"
            default 60000
            help
               Use this parameter to set the amount of time to decay from the minimum to maximum sleep time.  Units are in milliseconds.

        config SELECT_TASK_TIMEOUT_MS
            int  "Timeout (in ms) for select calls"
            default 0
            help
                Use this parameter to set the timeout passed to select.  Units are in milliseconds.

    endmenu

endmenu
